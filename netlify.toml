[build]
  command = "npm run build"
  publish = "dist"
  functions = "netlify/functions"

# ── API Routes ──────────────────────────────────────────────
# Maps clean URLs to Netlify Functions
# The browser calls /api/auth/login, Netlify routes it to
# the auth-login.js function automatically.

[[redirects]]
  from = "/api/auth/login"
  to = "/.netlify/functions/auth-login"
  status = 200

[[redirects]]
  from = "/api/auth/callback"
  to = "/.netlify/functions/auth-callback"
  status = 200

[[redirects]]
  from = "/api/auth/session"
  to = "/.netlify/functions/auth-session"
  status = 200

[[redirects]]
  from = "/api/auth/logout"
  to = "/.netlify/functions/auth-logout"
  status = 200

[[redirects]]
  from = "/api/auth/signup"
  to = "/.netlify/functions/auth-signup"
  status = 200

[[redirects]]
  from = "/api/auth/signin"
  to = "/.netlify/functions/auth-signin"
  status = 200

[[redirects]]
  from = "/api/auth/invite"
  to = "/.netlify/functions/auth-invite"
  status = 200

[[redirects]]
  from = "/api/auth/claim-invites"
  to = "/.netlify/functions/auth-claim-invites"
  status = 200

[[redirects]]
  from = "/api/auth/set-session"
  to = "/.netlify/functions/auth-set-session"
  status = 200

[[redirects]]
  from = "/api/auth/reset-request"
  to = "/.netlify/functions/auth-reset-request"
  status = 200

[[redirects]]
  from = "/api/auth/update-password"
  to = "/.netlify/functions/auth-update-password"
  status = 200

[[redirects]]
  from = "/api/parse-receipt"
  to = "/.netlify/functions/parse-receipt"
  status = 200

[[redirects]]
  from = "/api/db"
  to = "/.netlify/functions/db-query"
  status = 200

[[redirects]]
  from = "/google3a0ccd0dbbf0dd0b.html"
  to = "/google3a0ccd0dbbf0dd0b.html"
  status = 200

  [[redirects]]
  from = "/robots.txt"
  to = "/robots.txt"
  status = 200

[[redirects]]
  from = "/sitemap.xml"
  to = "/sitemap.xml"
  status = 200

# SPA routing — all other paths go to index.html
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
