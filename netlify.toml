[build]
  command = "npm run build"
  publish = "dist"
  functions = "netlify/functions"

# ── API Routes ──────────────────────────────────────────────
# Maps clean URLs to Netlify Functions
# The browser calls /api/auth/login, Netlify routes it to
# the auth-login.js function automatically.

[[redirects]]
  from = "/api/auth/login"
  to = "/.netlify/functions/auth-login"
  status = 200

[[redirects]]
  from = "/api/auth/callback"
  to = "/.netlify/functions/auth-callback"
  status = 200

[[redirects]]
  from = "/api/auth/session"
  to = "/.netlify/functions/auth-session"
  status = 200

[[redirects]]
  from = "/api/auth/logout"
  to = "/.netlify/functions/auth-logout"
  status = 200

[[redirects]]
  from = "/api/auth/signup"
  to = "/.netlify/functions/auth-signup"
  status = 200

[[redirects]]
  from = "/api/auth/signin"
  to = "/.netlify/functions/auth-signin"
  status = 200

[[redirects]]
  from = "/api/auth/invite"
  to = "/.netlify/functions/auth-invite"
  status = 200

[[redirects]]
  from = "/api/db"
  to = "/.netlify/functions/db-query"
  status = 200

# SPA routing — all other paths go to index.html
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
